<ion-header>
  <ion-toolbar>
    <ion-title>{{ 'settings.data' | translate }}</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="close()" aria-label="Close">
        <ion-icon name="close"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>
<ion-content>
  <!-- URL Input Section (shown when showUrlInput is true) -->
  <div *ngIf="showUrlInput" class="url-input-section">
    <ion-card>
      <ion-card-header>
        <ion-card-title>{{ 'settings.importFromUrl' | translate }}</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <p>{{ 'settings.enterUrlForDecks' | translate }}</p>
        <ion-item>
          <ion-input 
            type="url" 
            [(ngModel)]="importUrl" 
            placeholder="https://example.com/decks.json"
            [clearInput]="true">
          </ion-input>
        </ion-item>
        <div class="url-buttons">
          <ion-button fill="outline" (click)="cancelUrlInput()">
            {{ 'common.cancel' | translate }}
          </ion-button>
          <ion-button [disabled]="!importUrl" (click)="submitUrlImport()">
            {{ 'settings.importData' | translate }}
          </ion-button>
        </div>
      </ion-card-content>
    </ion-card>
  </div>

  <!-- Main buttons (hidden when URL input is shown) -->
  <div class="data-buttons" *ngIf="!showUrlInput">
    <ion-button expand="block" fill="outline" (click)="handleExportData()">
      <ion-icon name="download" slot="start"></ion-icon>
      {{ 'settings.exportData' | translate }}
    </ion-button>
    <ion-button expand="block" fill="outline" (click)="handleImportData()">
      <ion-icon name="cloud-upload" slot="start"></ion-icon>
      {{ 'settings.importData' | translate }}
    </ion-button>
    <ion-button expand="block" fill="outline" color="secondary" (click)="handleImportMultipleDecks()">
      <ion-icon name="documents" slot="start"></ion-icon>
      {{ 'settings.importMultipleDecks' | translate }}
    </ion-button>
    <ion-button expand="block" fill="outline" color="secondary" (click)="showUrlInputSection()">
      <ion-icon name="link" slot="start"></ion-icon>
      {{ 'settings.importMultipleDecksFromUrl' | translate }}
    </ion-button>
    <ion-button expand="block" fill="outline" color="warning" (click)="handleResetSettings()">
      <ion-icon name="refresh" slot="start"></ion-icon>
      {{ 'settings.resetSettings' | translate }}
    </ion-button>
    <ion-button expand="block" fill="outline" color="danger" (click)="handleResetData()">
      <ion-icon name="trash" slot="start"></ion-icon>
      {{ 'settings.deleteAllData' | translate }}
    </ion-button>
  </div>
</ion-content>

<ion-footer>
  <div style="padding: 16px;">
    <ion-button 
      expand="block" 
      (click)="close()" 
      [style.--background]="buttonBackground"
      [style.--color]="buttonText">
      <ion-icon name="checkmark" slot="start"></ion-icon>
      {{ 'settings.done' | translate }}
    </ion-button>
  </div>
</ion-footer>
