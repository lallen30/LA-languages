<ion-header>
  <ion-toolbar>
    <ion-title>{{ 'settings.appearance' | translate }}</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="close()" aria-label="Close">
        <ion-icon name="close"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>
<ion-content>
  <ion-list>
  <ion-item>
    <ion-icon name="moon" slot="start"></ion-icon>
    <ion-label>{{ 'settings.darkMode' | translate }}</ion-label>
    <div class="custom-toggle-wrapper" slot="end">
      <label class="custom-toggle">
        <input 
          type="checkbox" 
          [(ngModel)]="settings.darkMode"
          (change)="onDarkModeChange()"
        />
        <span class="toggle-slider"></span>
      </label>
    </div>
  </ion-item>
        
        <!-- Primary Colors -->
        <div class="color-section">
          <h4>{{ 'settings.primaryColors' | translate }}</h4>
          <ion-item button (click)="openCustomColorPicker('primary', 'Primary Color', $event)">
            <ion-label>{{ 'settings.primaryColor' | translate }}</ion-label>
            <div class="color-preview-container" slot="end">
              <div class="color-swatch" [style.background-color]="currentColorScheme.primary"></div>
            </div>
          </ion-item>
          <ion-item button (click)="openCustomColorPicker('secondary', 'Secondary Color', $event)">
            <ion-label>{{ 'settings.secondaryColor' | translate }}</ion-label>
            <div class="color-preview-container" slot="end">
              <div class="color-swatch" [style.background-color]="currentColorScheme.secondary"></div>
            </div>
          </ion-item>
          <ion-item button (click)="openCustomColorPicker('tertiary', 'Tertiary Color', $event)">
            <ion-label>{{ 'settings.tertiaryColor' | translate }}</ion-label>
            <div class="color-preview-container" slot="end">
              <div class="color-swatch" [style.background-color]="currentColorScheme.tertiary"></div>
            </div>
          </ion-item>
        </div>

        <!-- Background Colors -->
        <div class="color-section">
          <h4>{{ 'settings.backgroundColors' | translate }}</h4>
          <ion-item button (click)="openCustomColorPicker('background', 'Page Background', $event)">
            <ion-label>{{ 'settings.pageBackground' | translate }}</ion-label>
            <div class="color-preview-container" slot="end">
              <div class="color-swatch" [style.background-color]="currentColorScheme.background"></div>
            </div>
          </ion-item>
          <ion-item button (click)="openCustomColorPicker('cardBackground', 'Card Background', $event)">
            <ion-label>{{ 'settings.cardBackground' | translate }}</ion-label>
            <div class="color-preview-container" slot="end">
              <div class="color-swatch" [style.background-color]="currentColorScheme.cardBackground"></div>
            </div>
          </ion-item>
          <ion-item button (click)="openCustomColorPicker('itemBackground', 'Item Background', $event)">
            <ion-label>{{ 'settings.itemBackground' | translate }}</ion-label>
            <div class="color-preview-container" slot="end">
              <div class="color-swatch" [style.background-color]="currentColorScheme.itemBackground"></div>
            </div>
          </ion-item>
        </div>

        <!-- Text Colors -->
        <div class="color-section">
          <h4>{{ 'settings.textColors' | translate }}</h4>
          <ion-item button (click)="openCustomColorPicker('textPrimary', 'Primary Text', $event)">
            <ion-label>{{ 'settings.primaryText' | translate }}</ion-label>
            <div class="color-preview-container" slot="end">
              <div class="color-swatch" [style.background-color]="currentColorScheme.textPrimary"></div>
            </div>
          </ion-item>
          <ion-item button (click)="openCustomColorPicker('textSecondary', 'Secondary Text', $event)">
            <ion-label>{{ 'settings.secondaryText' | translate }}</ion-label>
            <div class="color-preview-container" slot="end">
              <div class="color-swatch" [style.background-color]="currentColorScheme.textSecondary"></div>
            </div>
          </ion-item>
          <ion-item button (click)="openCustomColorPicker('cardText', 'Card Text', $event)">
            <ion-label>{{ 'settings.cardText' | translate }}</ion-label>
            <div class="color-preview-container" slot="end">
              <div class="color-swatch" [style.background-color]="currentColorScheme.cardText"></div>
            </div>
          </ion-item>
          <ion-item button (click)="openCustomColorPicker('itemText', 'Item Text', $event)">
            <ion-label>{{ 'settings.itemText' | translate }}</ion-label>
            <div class="color-preview-container" slot="end">
              <div class="color-swatch" [style.background-color]="currentColorScheme.itemText"></div>
            </div>
          </ion-item>
        </div>

                <!-- Button Colors -->
                <div class="color-section">
                  <h4>{{ 'settings.buttonColors' | translate }}</h4>
                  <ion-item button (click)="openCustomColorPicker('buttonBackground', 'Button Background', $event)">
                    <ion-label>{{ 'settings.buttonBackground' | translate }}</ion-label>
                    <div class="color-preview-container" slot="end">
                      <div class="color-swatch" [style.background-color]="currentColorScheme.buttonBackground"></div>
                    </div>
                  </ion-item>
                  <ion-item button (click)="openCustomColorPicker('buttonText', 'Button Text', $event)">
                    <ion-label>{{ 'settings.buttonText' | translate }}</ion-label>
                    <div class="color-preview-container" slot="end">
                      <div class="color-swatch" [style.background-color]="currentColorScheme.buttonText"></div>
                    </div>
                  </ion-item>
                  <ion-item button (click)="openCustomColorPicker('outlinedButtonColor', 'Outlined Button', $event)">
                    <ion-label>{{ 'settings.outlinedButton' | translate }}</ion-label>
                    <div class="color-preview-container" slot="end">
                      <div class="color-swatch" [style.background-color]="currentColorScheme.outlinedButtonColor"></div>
                    </div>
                  </ion-item>
                </div>

        <!-- Button Colors -->
        <div class="color-section">
          <h4>{{ 'settings.headerFooterColors' | translate }}</h4>
          <ion-item button (click)="openCustomColorPicker('headerBackground', 'Header Background', $event)">
            <ion-label>{{ 'settings.headerBackground' | translate }}</ion-label>
            <div class="color-preview-container" slot="end">
              <div class="color-swatch" [style.background-color]="currentColorScheme.headerBackground"></div>
            </div>
          </ion-item>
          <ion-item button (click)="openCustomColorPicker('headerText', 'Header Text', $event)">
            <ion-label>{{ 'settings.headerText' | translate }}</ion-label>
            <div class="color-preview-container" slot="end">
              <div class="color-swatch" [style.background-color]="currentColorScheme.headerText"></div>
            </div>
          </ion-item>
          <ion-item button (click)="openCustomColorPicker('footerBackground', 'Footer Background', $event)">
            <ion-label>{{ 'settings.footerBackground' | translate }}</ion-label>
            <div class="color-preview-container" slot="end">
              <div class="color-swatch" [style.background-color]="currentColorScheme.footerBackground"></div>
            </div>
          </ion-item>
          <ion-item button (click)="openCustomColorPicker('footerText', 'Footer Text', $event)">
            <ion-label>{{ 'settings.footerText' | translate }}</ion-label>
            <div class="color-preview-container" slot="end">
              <div class="color-swatch" [style.background-color]="currentColorScheme.footerText"></div>
            </div>
          </ion-item>
          
        </div>

        <!-- Flashcard Action Bar Colors -->
        <div class="color-section">
          <h4>{{ 'settings.flashcardActionBar' | translate }}</h4>
          <!-- Updated section for flashcard review buttons -->
          
          <!-- Hard Button Colors -->
          <ion-item button (click)="openCustomColorPicker('hardButtonBackground', 'Hard Button Background', $event)">
            <ion-label>{{ 'settings.hardButtonBg' | translate }}</ion-label>
            <div class="color-preview-container" slot="end">
              <div class="color-swatch" [style.background-color]="currentColorScheme.hardButtonBackground"></div>
            </div>
          </ion-item>
          <ion-item button (click)="openCustomColorPicker('hardButtonText', 'Hard Button Text', $event)">
            <ion-label>{{ 'settings.hardButtonTxt' | translate }}</ion-label>
            <div class="color-preview-container" slot="end">
              <div class="color-swatch" [style.background-color]="currentColorScheme.hardButtonText"></div>
            </div>
          </ion-item>
          
          <!-- Good Button Colors -->
          <ion-item button (click)="openCustomColorPicker('goodButtonBackground', 'Good Button Background', $event)">
            <ion-label>{{ 'settings.goodButtonBg' | translate }}</ion-label>
            <div class="color-preview-container" slot="end">
              <div class="color-swatch" [style.background-color]="currentColorScheme.goodButtonBackground"></div>
            </div>
          </ion-item>
          <ion-item button (click)="openCustomColorPicker('goodButtonText', 'Good Button Text', $event)">
            <ion-label>{{ 'settings.goodButtonTxt' | translate }}</ion-label>
            <div class="color-preview-container" slot="end">
              <div class="color-swatch" [style.background-color]="currentColorScheme.goodButtonText"></div>
            </div>
          </ion-item>
          
          <!-- Easy Button Colors -->
          <ion-item button (click)="openCustomColorPicker('easyButtonBackground', 'Easy Button Background', $event)">
            <ion-label>{{ 'settings.easyButtonBg' | translate }}</ion-label>
            <div class="color-preview-container" slot="end">
              <div class="color-swatch" [style.background-color]="currentColorScheme.easyButtonBackground"></div>
            </div>
          </ion-item>
          <ion-item button (click)="openCustomColorPicker('easyButtonText', 'Easy Button Text', $event)">
            <ion-label>{{ 'settings.easyButtonTxt' | translate }}</ion-label>
            <div class="color-preview-container" slot="end">
              <div class="color-swatch" [style.background-color]="currentColorScheme.easyButtonText"></div>
            </div>
          </ion-item>
          
          <!-- I Don't Know Button Colors -->
          <ion-item button (click)="openCustomColorPicker('incorrectButtonBackground', 'I Don\'t Know Button Background', $event)">
            <ion-label>{{ 'settings.incorrectButtonBg' | translate }}</ion-label>
            <div class="color-preview-container" slot="end">
              <div class="color-swatch" [style.background-color]="currentColorScheme.incorrectButtonBackground"></div>
            </div>
          </ion-item>
          <ion-item button (click)="openCustomColorPicker('incorrectButtonText', 'I Don\'t Know Button Text', $event)">
            <ion-label>{{ 'settings.incorrectButtonTxt' | translate }}</ion-label>
            <div class="color-preview-container" slot="end">
              <div class="color-swatch" [style.background-color]="currentColorScheme.incorrectButtonText"></div>
            </div>
          </ion-item>
        </div>

        <!-- Action Buttons -->
        <div class="color-actions">
          <ion-button expand="block" fill="outline" color="danger" (click)="resetColors()">
            <ion-icon name="refresh" slot="start"></ion-icon>
            {{ 'settings.resetToDefault' | translate }}
          </ion-button>
          <ion-button 
            expand="block" 
            (click)="close()"
            id="apply-colors-btn">
            <ion-icon name="checkmark" slot="start"></ion-icon>
            {{ 'settings.done' | translate }}
          </ion-button>
        </div>
  </ion-list>
</ion-content>
