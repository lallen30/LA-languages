<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-button (click)="goBack()">
        <ion-icon name="arrow-back"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title>Help & Guide</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">Help & Guide</ion-title>
    </ion-toolbar>
  </ion-header>

  <!-- Welcome -->
  <ion-card>
    <ion-card-header>
      <ion-card-title>
        <ion-icon name="sparkles" slot="start"></ion-icon>
        Welcome to FluentFlip
      </ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <p>FluentFlip is a powerful language learning app that combines <strong>flashcard-based spaced repetition</strong> with <strong>AI-generated stories</strong> to help you master vocabulary and reading comprehension.</p>
      
      <h4>Main Features:</h4>
      <ul>
        <li><strong>Flashcard Decks</strong> - Create and study vocabulary with spaced repetition</li>
        <li><strong>AI Stories</strong> - Generate custom stories using your vocabulary words</li>
        <li><strong>Text-to-Speech</strong> - Hear correct pronunciation of words and stories</li>
        <li><strong>Progress Tracking</strong> - Monitor your learning with detailed statistics</li>
      </ul>
    </ion-card-content>
  </ion-card>

  <!-- Spaced Repetition System -->
  <ion-card>
    <ion-card-header>
      <ion-card-title>
        <ion-icon name="library" slot="start"></ion-icon>
        Spaced Repetition System
      </ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <p>FluentFlip uses a scientifically-proven <strong>spaced repetition algorithm</strong> to help you learn more effectively by showing cards at optimal intervals.</p>
      
      <h4>How It Works:</h4>
      <ul>
        <li><strong>New cards</strong> appear immediately for learning</li>
        <li><strong>Easy cards</strong> reappear after longer intervals (days/weeks)</li>
        <li><strong>Good cards</strong> reappear at standard intervals</li>
        <li><strong>Hard cards</strong> reappear sooner for more practice</li>
        <li><strong>"I don't know" cards</strong> reset to day 1 and need relearning</li>
      </ul>

      <ion-note color="primary">
        <ion-icon name="information-circle" slot="start"></ion-icon>
        The algorithm automatically adjusts based on your performance to optimize long-term retention.
      </ion-note>

      <h4>Mastered Cards:</h4>
      <p>A card is considered <strong>mastered</strong> when it meets both criteria:</p>
      <ul>
        <li>The card has been <strong>studied at least once</strong> (no longer "new")</li>
        <li>The card has been <strong>successfully reviewed 3 or more times</strong></li>
      </ul>
      <p>The "Mastered" count on each deck shows how many cards you've learned well enough that they're in your long-term memory.</p>
    </ion-card-content>
  </ion-card>
  <!-- Study Session Guide -->
  <ion-card>
    <ion-card-header>
      <ion-card-title class="study-session-guide">
        <ion-icon name="school" slot="start"></ion-icon>
        Study Session Guide
      </ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <h4>During Study Sessions:</h4>
      <div class="response-guide">
        <div class="response-item">
          <ion-button size="small" color="success" fill="outline">
            <ion-icon name="checkmark" slot="start"></ion-icon>
            Easy
          </ion-button>
          <span>You knew the answer immediately and confidently</span>
        </div>
        <div class="response-item">
          <ion-button size="small" color="primary" fill="outline">
            <ion-icon name="thumbs-up" slot="start"></ion-icon>
            Good
          </ion-button>
          <span>You knew the answer after thinking briefly</span>
        </div>
        <div class="response-item">
          <ion-button size="small" color="warning" fill="outline">
            <ion-icon name="thumbs-down" slot="start"></ion-icon>
            Hard
          </ion-button>
          <span>You struggled but eventually remembered</span>
        </div>
        <div class="response-item">
          <ion-button size="small" color="danger" fill="outline">
            <ion-icon name="close" slot="start"></ion-icon>
            Again
          </ion-button>
          <span>You couldn't remember or got it wrong</span>
        </div>
      </div>

      <h4>Intra-Session Repetition:</h4>
      <p>Cards marked as <strong>Hard</strong> or <strong>I don't know</strong> will reappear within the same study session for immediate reinforcement:</p>
      <ul>
        <li><strong>Hard cards</strong> reappear after ~8 cards for additional practice</li>
        <li><strong>"I don't know" cards</strong> reappear after ~3 cards for quick review</li>
      </ul>
    </ion-card-content>
  </ion-card>

  <!-- Session Completion -->
  <ion-card>
    <ion-card-header>
      <ion-card-title>
        <ion-icon name="checkmark-circle" slot="start"></ion-icon>
        Session Completion
      </ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <p>When you finish a study session, you'll see a summary with three options:</p>
      
      <div class="completion-options">
        <div class="option-item">
          <ion-button size="small" color="tertiary" fill="outline">Review Missed Cards</ion-button>
          <span>Practice only the cards you marked "I don't know" for focused learning</span>
        </div>
        <div class="option-item">
          <ion-button size="small" color="primary" fill="outline">Study More Cards</ion-button>
          <span>Continue with more cards from the same deck</span>
        </div>
        <div class="option-item">
          <ion-button size="small" color="medium" fill="outline">Finish</ion-button>
          <span>Return to the Decks page</span>
        </div>
      </div>
    </ion-card-content>
  </ion-card>

  <!-- Decks & Cards -->
  <ion-card>
    <ion-card-header>
      <ion-card-title>
        <ion-icon name="albums" slot="start"></ion-icon>
        Decks & Cards
      </ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <h4>Creating Decks:</h4>
      <p>Decks are collections of flashcards organized by topic. To create a deck:</p>
      <ol>
        <li>Go to the <strong>Decks</strong> tab</li>
        <li>Tap the <strong>+</strong> button in the header</li>
        <li>Enter a name and optional description</li>
        <li>Choose a language for the deck</li>
      </ol>

      <h4>Card Types:</h4>
      <ul>
        <li><strong>Picture-Word:</strong> Image with target language word and English translation. Great for visual learners!</li>
        <li><strong>Fill-in-the-Blank:</strong> Complete sentences with missing words. Helps learn words in context.</li>
        <li><strong>Translation:</strong> Translate between languages. Cards randomly show either direction for comprehensive practice.</li>
      </ul>

      <h4>Adding Cards:</h4>
      <ol>
        <li>Select a deck from the Decks page</li>
        <li>Tap the <strong>+</strong> button</li>
        <li>Choose the card type (Picture, Fill-in-Blank, or Translate)</li>
        <li>Enter the required information</li>
      </ol>

      <h4>Managing Cards:</h4>
      <ul>
        <li><strong>Manage Deck:</strong> View, edit, or delete individual cards</li>
        <li><strong>Reset Progress:</strong> Reset individual cards or entire decks to start fresh</li>
        <li><strong>Import/Export:</strong> Share decks between devices or with others</li>
      </ul>
    </ion-card-content>
  </ion-card>

  <!-- AI Stories -->
  <ion-card class="ai-stories-card">
    <ion-card-header>
      <ion-card-title>
        <ion-icon name="book" slot="start"></ion-icon>
        AI Stories
      </ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <p>Generate custom stories using AI that incorporate your vocabulary words. This helps you see words used in context and improves reading comprehension.</p>

      <h4>Story Categories:</h4>
      <p>Organize your stories into categories (e.g., "Travel", "Food", "Daily Life"):</p>
      <ul>
        <li>Tap the <strong>folder icon</strong> in the Stories header to create a category</li>
        <li>Filter stories by category using the dropdown</li>
      </ul>

      <h4>Word Categories:</h4>
      <p>Create collections of vocabulary words to use in story generation:</p>
      <ul>
        <li>Tap the <strong>+</strong> button to create a word category</li>
        <li>Add words you want to practice</li>
        <li>Use these words when generating new stories</li>
      </ul>

      <h4>Generating Stories:</h4>
      <ol>
        <li>Go to the <strong>Stories</strong> tab</li>
        <li>Tap a word category and select "Use in New Story"</li>
        <li>Choose a subject, difficulty level, and story category</li>
        <li>The AI will generate a story incorporating your vocabulary</li>
      </ol>

      <h4>Reading Stories:</h4>
      <ul>
        <li>Tap any story to read it</li>
        <li>Use the <strong>speaker icon</strong> to hear the story read aloud</li>
        <li>Tap individual words in the "Words included" section to hear pronunciation</li>
        <li>Filter stories by level (Beginner, Intermediate, Advanced)</li>
      </ul>

      <h4>Export & Import Stories:</h4>
      <ul>
        <li>Export all stories or just a selected category</li>
        <li>Export individual stories from the menu</li>
        <li>Import stories on another device - categories are created automatically</li>
      </ul>
    </ion-card-content>
  </ion-card>

  <!-- Data Backup & Restore -->
  <ion-card>
    <ion-card-header>
      <ion-card-title>
        <ion-icon name="cloud-download" slot="start"></ion-icon>
        Data Management
      </ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <p>Manage your app data from <strong>Settings â†’ Data</strong>.</p>

      <h4>Export All App Data:</h4>
      <p>Create a complete backup of everything including:</p>
      <ul>
        <li>All decks and flashcards</li>
        <li>Study progress and statistics</li>
        <li>All stories and categories</li>
        <li>Word categories</li>
        <li>App settings (language, appearance, study preferences)</li>
      </ul>

      <h4>Import And Replace All App Data:</h4>
      <p>Restore from a backup file. This will replace all current data with the backup.</p>

      <ion-note color="warning">
        <ion-icon name="warning" slot="start"></ion-icon>
        <div>
          <strong>Important:</strong><br>
          Importing data replaces all existing data. Export your current data first if you want to keep it.
        </div>
      </ion-note>

      <h4>Import Multiple Decks (File):</h4>
      <p>Add decks from a JSON file without replacing your existing data. Great for importing shared deck collections.</p>

      <h4>Import Multiple Decks (URL):</h4>
      <p>Import decks directly from a web URL. Useful for downloading community-shared deck collections.</p>

      <h4>Reset Settings:</h4>
      <p>Restore all app settings to their default values. This does not affect your decks, cards, or stories.</p>

      <h4>Delete All Data:</h4>
      <p>Permanently remove all decks, cards, stories, and progress. Use with caution - this cannot be undone!</p>

      <ion-note color="primary">
        <ion-icon name="bulb" slot="start"></ion-icon>
        <strong>Tip:</strong> Regularly export your data to keep a backup of your learning progress.
      </ion-note>
    </ion-card-content>
  </ion-card>

  <div class="settings-spacer"></div>
  <!-- Settings Guide -->
  <ion-card class="settings-card">
    <ion-card-header>
      <ion-card-title>
        <ion-icon name="settings" slot="start"></ion-icon>
        Settings & Customization
      </ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <h4>Language Settings:</h4>
      <ul>
        <li><strong>Native Language:</strong> Language for the app interface</li>
        <li><strong>Target Language:</strong> Language you are learning</li>
      </ul>

      <h4>Text-to-Speech:</h4>
      <ul>
        <li><strong>Voice Selection:</strong> Choose from available voices for your target language</li>
        <li><strong>Speech Rate:</strong> Adjust how fast words are spoken</li>
        <li><strong>Auto-speak:</strong> Automatically pronounce words when cards flip</li>
      </ul>

      <h4>Study Settings:</h4>
      <ul>
        <li><strong>Max Cards Per Session:</strong> Control how many cards you study (5-500)</li>
        <li><strong>Study Reminders:</strong> Get notifications to maintain your streak</li>
      </ul>

      <h4>Appearance:</h4>
      <ul>
        <li><strong>Dark Mode:</strong> Switch between light and dark themes</li>
        <li><strong>Color Customization:</strong> Personalize button colors and backgrounds</li>
      </ul>

      <ion-note color="success">
        <ion-icon name="bulb" slot="start"></ion-icon>
        <strong>Tip:</strong> Start with 20 cards per session and adjust based on your available time.
      </ion-note>
    </ion-card-content>
  </ion-card>

  <!-- Tips & Best Practices -->
  <ion-card>
    <ion-card-header>
      <ion-card-title class="tips-title">
        <ion-icon name="star" slot="start"></ion-icon>
        Tips & Best Practices
      </ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <div class="tips-list">
        <div class="tip-item">
          <ion-icon name="time" color="primary"></ion-icon>
          <div>
            <strong>Study consistently:</strong> Daily 10-15 minute sessions are more effective than long, infrequent sessions.
          </div>
        </div>
        
        <div class="tip-item">
          <ion-icon name="trending-up" color="success"></ion-icon>
          <div>
            <strong>Be honest with responses:</strong> Choose the difficulty that truly reflects your knowledge for optimal scheduling.
          </div>
        </div>
        
        <div class="tip-item">
          <ion-icon name="book" color="tertiary"></ion-icon>
          <div>
            <strong>Read AI stories:</strong> Stories help you see vocabulary in context and improve reading comprehension.
          </div>
        </div>
        
        <div class="tip-item">
          <ion-icon name="volume-high" color="medium"></ion-icon>
          <div>
            <strong>Use audio features:</strong> Enable auto-speak to improve pronunciation and listening skills.
          </div>
        </div>
        
        <div class="tip-item">
          <ion-icon name="cloud-upload" color="warning"></ion-icon>
          <div>
            <strong>Backup regularly:</strong> Export your data periodically to avoid losing progress.
          </div>
        </div>
        
        <div class="tip-item">
          <ion-icon name="library" color="primary"></ion-icon>
          <div>
            <strong>Organize your content:</strong> Create focused decks and story categories for targeted learning.
          </div>
        </div>
      </div>
    </ion-card-content>
  </ion-card>

  <!-- Getting Started -->
  <ion-card>
    <ion-card-header>
      <ion-card-title>
        <ion-icon name="rocket" slot="start"></ion-icon>
        Getting Started
      </ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <h4>Quick Start Guide:</h4>
      <ol>
        <li><strong>Create a deck</strong> in the Decks tab or import existing cards</li>
        <li><strong>Add cards</strong> using the + button (Picture, Fill-in-Blank, or Translate)</li>
        <li><strong>Start studying</strong> by tapping the Study button on a deck</li>
        <li><strong>Answer honestly</strong> using Easy, Good, Hard, or "I don't know"</li>
        <li><strong>Review missed cards</strong> at the end of each session</li>
        <li><strong>Create word categories</strong> in the Stories tab</li>
        <li><strong>Generate AI stories</strong> using your vocabulary words</li>
        <li><strong>Study daily</strong> to maintain momentum and see progress</li>
      </ol>
      
      <ion-note color="success">
        <ion-icon name="heart" slot="start"></ion-icon>
        Remember: Learning is a journey. Be patient with yourself and celebrate small victories!
      </ion-note>
    </ion-card-content>
  </ion-card>

</ion-content>
